(function(a){a.fn.priceFormat=function(b){var c={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:false,centsLimit:2,clearPrefix:false,clearSufix:false,allowNegative:false,removeCents:false};var b=a.extend(c,b);return this.each(function(){function o(a){var b="";for(var c=0;c<a.length;c++){char_=a.charAt(c);if(b.length==0&&char_==0)char_=false;if(char_&&char_.match(d)){if(i){if(b.length<i)b=b+char_}else{b=b+char_}}}return b}function p(a){while(a.length<j+1)a="0"+a;return a}function q(a){var b=n?o(a):p(o(a));var c="";var d=0;var i=b.substr(b.length-j,j);var k=n?b.substr(0,b.length):b.substr(0,b.length-j);b=n?k:k+g+i;if(h){for(var l=k.length;l>0;l--){char_=k.substr(l-1,1);d++;if(d%3==0)char_=h+char_;c=char_+c}if(c.substr(0,1)==h)c=c.substring(1,c.length);b=n?c:c+g+i}if(m&&a.indexOf("-")!=-1&&(k!=0||i!=0))b="-"+b;if(e)b=e+b;if(f)b=b+f;return b}function r(a){var b=a.keyCode?a.keyCode:a.which;var d=String.fromCharCode(b);var e=false;var f=c.val();var g=q(f+d);if(b>=48&&b<=57||b>=96&&b<=105)e=true;if(b==8)e=true;if(b==9)e=true;if(b==13)e=true;if(b==46)e=true;if(b==37)e=true;if(b==39)e=true;if(m&&(b==189||b==109))e=true;if(!e){a.preventDefault();a.stopPropagation();if(f!=g)c.val(g)}}function s(){var a=c.val();var b=q(a);if(a!=b)c.val(b)}function t(){var a=c.val();c.val(e+a)}function u(){var a=c.val();c.val(a+f)}function v(){if(a.trim(e)!=""&&k){var b=c.val().split(e);c.val(b[1])}}function w(){if(a.trim(f)!=""&&l){var b=c.val().split(f);c.val(b[0])}}var c=a(this);var d=/[0-9]/;var e=b.prefix;var f=b.suffix;var g=b.centsSeparator;var h=b.thousandsSeparator;var i=b.limit;var j=b.centsLimit;var k=b.clearPrefix;var l=b.clearSuffix;var m=b.allowNegative;var n=b.removeCents;a(this).bind("keydown",r);a(this).bind("keyup",s);if(k){a(this).bind("focusout",function(){v()});a(this).bind("focusin",function(){t()})}if(l){a(this).bind("focusout",function(){w()});a(this).bind("focusin",function(){u()})}if(a(this).val().length>0){s();v();w()}})};jQuery.fn.unmask=function(){var b=a(this).val();var c="";for(var d in b){if(!isNaN(b[d])||b[d]=="-")c+=b[d]}return c}})(jQuery)