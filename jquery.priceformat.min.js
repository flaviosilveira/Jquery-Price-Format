!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";t.fn.priceFormat=function(n){n=t.extend(!0,{},t.fn.priceFormat.defaults,n);t(this).data("options",n),window.ctrl_down=!1;var e=!1;return t(window).bind("keyup keydown",function(t){return window.ctrl_down=t.ctrlKey,!0}),t(this).bind("keyup keydown",function(t){return e=t.metaKey,!0}),this.each(function(){var r=t(this),i="",o=/[0-9]/;i=r.is("input")?r.val():r.html();var a=n.prefix,u=n.suffix,f=n.centsSeparator,c=n.thousandsSeparator,s=n.limit,l=n.centsLimit,p=n.clearPrefix,d=n.clearSuffix,h=n.allowNegative,m=n.insertPlusSign,g=n.clearOnEmpty,v=n.leadingZero;function w(t){r.is("input")?r.val(t):r.html(t),r.trigger("pricechange")}function y(){return i=r.is("input")?r.val():r.html()}function x(n,e){if(!e&&(""===n||n==x("0",!0))&&g)return"";var r=function(t){for(;t.length<l+1;)t="0"+t;return t}(function(t){for(var n="",e=0;e<t.length;e++){var r=t.charAt(e);0==n.length&&0==r&&(r=!1),r&&r.match(o)&&(s?n.length<s&&(n+=r):n+=r)}return n}(n)),i="",p=0;0==l&&(f="",d="");var d=r.substr(r.length-l,l),w=r.substr(0,r.length-l);if(r=v?w+f+d:"0"!==w?w+f+d:f+d,c||""!=t.trim(c)){for(var y=w.length;y>0;y--){var b=w.substr(y-1,1);++p%3==0&&(b=c+b),i=b+i}i.substr(0,1)==c&&(i=i.substring(1,i.length)),r=0==l?i:i+f+d}return!h||0==w&&0==d||(r=-1!=n.indexOf("-")&&n.indexOf("+")<n.indexOf("-")?"-"+r:m?"+"+r:""+r),a&&(r=a+r),u&&(r+=u),r}function b(){var t=y(),n=x(t);t!=n&&w(n),n==x("0",!0)&&"0"!=t&&g&&w("")}function S(){""!=t.trim(a)&&p&&w(y().split(a)[1])}function _(){""!=t.trim(u)&&d&&w(y().split(u)[0])}m&&(h=!0),r.bind("keydown.price_format",function(t){var n=t.keyCode?t.keyCode:t.which,r=String.fromCharCode(n),o=!1,a=i,u=x(a+r);(n>=48&&n<=57||n>=96&&n<=105)&&(o=!0),192==n&&(o=!0),8==n&&(o=!0),9==n&&(o=!0),13==n&&(o=!0),46==n&&(o=!0),37==n&&(o=!0),39==n&&(o=!0),!h||189!=n&&109!=n&&173!=n||(o=!0),!m||187!=n&&107!=n&&61!=n||(o=!0),n>=16&&n<=20&&(o=!0),27==n&&(o=!0),n>=33&&n<=40&&(o=!0),n>=44&&n<=46&&(o=!0),(window.ctrl_down||e)&&(86==n&&(o=!0),67==n&&(o=!0),88==n&&(o=!0),82==n&&(o=!0),84==n&&(o=!0),76==n&&(o=!0),87==n&&(o=!0),81==n&&(o=!0),78==n&&(o=!0),65==n&&(o=!0)),o||(t.preventDefault(),t.stopPropagation(),a!=u&&w(u))}),r.bind("keyup.price_format",b),r.bind("focusout.price_format",b),p&&(r.bind("focusout.price_format",function(){S()}),r.bind("focusin.price_format",function(){r.val(a+y())})),d&&(r.bind("focusout.price_format",function(){_()}),r.bind("focusin.price_format",function(){r.val(y()+u)})),y().length>0&&(b(),S(),_())})},t.fn.unpriceFormat=function(){return t(this).unbind(".price_format")},t.fn.unmask=function(){var n,e="";n=t(this).is("input")?t(this).val()||[]:t(this).html();for(var r=0;r<n.length;r++)isNaN(n[r])&&"-"!=n[r]||(e+=n[r]);return e},t.fn.priceToFloat=function(){var n;n=t(this).is("input")?t(this).val()||[]:t(this).html();let e=t(this).data("options");return n=(n=n.replace(new RegExp("\\"+e.thousandsSeparator,"g"),"")).replace(new RegExp("\\"+e.centsSeparator,"g"),"."),parseFloat(n.replace(/[^0-9\-\.]/g,""))},t.fn.priceFormat.defaults={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1,clearOnEmpty:!1,leadingZero:!0}});